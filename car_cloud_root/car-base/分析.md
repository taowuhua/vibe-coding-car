二手车交易平台（批批车）接口设计实施计划
需求分析
根据界面截图分析，"批批车"是一个 B2B 二手车交易平台，主要功能模块包括：

界面截图
Review
界面截图

功能模块划分
模块	功能描述	对应目录
车源模块	车辆信息发布、搜索、筛选（按品牌/价格/排序）、车辆详情查看	/car
微店模块	车商个人店铺管理、店铺车源展示	/shop
求购模块	发布求购需求、求购大厅浏览	/purchase
物流模块	物流板车查询、物流订单管理	/logistics
记录查询模块	查看历史记录、收藏记录	/record
询价模块	车辆询价、询价回复	/inquiry
用户审核
IMPORTANT

请确认以下设计决策：

数据库表结构是否符合业务需求？
接口设计的分类和命名是否合理？
是否需要增加其他功能模块？
数据库表设计
1. 车源表 (car_source)
-- 车源信息表
CREATE TABLE car_source (
    tid BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '序号',
    car_no VARCHAR(50) NOT NULL COMMENT '车辆编号',
    brand VARCHAR(100) NOT NULL COMMENT '品牌',
    model VARCHAR(200) NOT NULL COMMENT '车型',
    year_month VARCHAR(20) COMMENT '上牌年月',
    mileage DECIMAL(10,2) COMMENT '行驶里程(万公里)',
    price DECIMAL(12,2) COMMENT '批发价(万)',
    city VARCHAR(50) COMMENT '所在城市',
    province VARCHAR(50) COMMENT '所在省份',
    color VARCHAR(20) COMMENT '车辆颜色',
    displacement VARCHAR(20) COMMENT '排量',
    gearbox VARCHAR(20) COMMENT '变速箱类型',
    fuel_type VARCHAR(20) COMMENT '燃料类型(汽油/柴油/新能源)',
    energy_type TINYINT DEFAULT 0 COMMENT '能源类型(0:传统燃油 1:新能源)',
    images TEXT COMMENT '车辆图片(JSON数组)',
    description TEXT COMMENT '车辆描述',
    shop_id BIGINT COMMENT '所属微店ID',
    source_type TINYINT DEFAULT 0 COMMENT '车源类型(0:普通 1:优势车源 2:秒杀车源)',
    is_new_today TINYINT DEFAULT 0 COMMENT '今日上新(0:否 1:是)',
    status TINYINT DEFAULT 1 COMMENT '状态(0:下架 1:上架 2:已售)',
    memo VARCHAR(500) COMMENT '备注',
    create_user VARCHAR(50) COMMENT '创建用户',
    create_date DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    oper_user VARCHAR(50) COMMENT '操作用户',
    update_date DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_brand (brand),
    INDEX idx_city (city),
    INDEX idx_price (price),
    INDEX idx_shop_id (shop_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='车源信息表';
2. 微店表 (shop)
-- 微店信息表
CREATE TABLE shop (
    tid BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '序号',
    shop_name VARCHAR(100) NOT NULL COMMENT '店铺名称',
    user_id BIGINT NOT NULL COMMENT '所属用户ID',
    logo VARCHAR(255) COMMENT '店铺Logo',
    contact_name VARCHAR(50) COMMENT '联系人',
    contact_phone VARCHAR(20) COMMENT '联系电话',
    address VARCHAR(200) COMMENT '店铺地址',
    city VARCHAR(50) COMMENT '所在城市',
    province VARCHAR(50) COMMENT '所在省份',
    description TEXT COMMENT '店铺描述',
    car_count INT DEFAULT 0 COMMENT '在售车辆数',
    status TINYINT DEFAULT 1 COMMENT '状态(0:停用 1:正常)',
    memo VARCHAR(500) COMMENT '备注',
    create_user VARCHAR(50) COMMENT '创建用户',
    create_date DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    oper_user VARCHAR(50) COMMENT '操作用户',
    update_date DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_user_id (user_id),
    INDEX idx_city (city)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='微店信息表';
3. 求购表 (purchase_demand)
-- 求购需求表
CREATE TABLE purchase_demand (
    tid BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '序号',
    demand_no VARCHAR(50) NOT NULL COMMENT '求购编号',
    user_id BIGINT NOT NULL COMMENT '发布用户ID',
    brand VARCHAR(100) COMMENT '意向品牌',
    model VARCHAR(200) COMMENT '意向车型',
    year_range VARCHAR(50) COMMENT '年份范围',
    price_min DECIMAL(12,2) COMMENT '预算最低价(万)',
    price_max DECIMAL(12,2) COMMENT '预算最高价(万)',
    mileage_max DECIMAL(10,2) COMMENT '最大里程(万公里)',
    city VARCHAR(50) COMMENT '所在城市',
    contact_name VARCHAR(50) COMMENT '联系人',
    contact_phone VARCHAR(20) COMMENT '联系电话',
    description TEXT COMMENT '详细需求描述',
    status TINYINT DEFAULT 1 COMMENT '状态(0:已关闭 1:进行中 2:已完成)',
    memo VARCHAR(500) COMMENT '备注',
    create_user VARCHAR(50) COMMENT '创建用户',
    create_date DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    oper_user VARCHAR(50) COMMENT '操作用户',
    update_date DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_user_id (user_id),
    INDEX idx_brand (brand),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='求购需求表';
4. 物流板车表 (logistics_truck)
-- 物流板车表
CREATE TABLE logistics_truck (
    tid BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '序号',
    truck_no VARCHAR(50) NOT NULL COMMENT '板车编号',
    driver_name VARCHAR(50) COMMENT '司机姓名',
    driver_phone VARCHAR(20) COMMENT '司机电话',
    truck_plate VARCHAR(20) COMMENT '车牌号',
    from_city VARCHAR(50) COMMENT '出发城市',
    from_province VARCHAR(50) COMMENT '出发省份',
    to_city VARCHAR(50) COMMENT '目的城市',
    to_province VARCHAR(50) COMMENT '目的省份',
    capacity INT COMMENT '装载数量',
    available_count INT COMMENT '剩余位置',
    departure_date DATE COMMENT '出发日期',
    price_per_car DECIMAL(10,2) COMMENT '单车运费',
    status TINYINT DEFAULT 1 COMMENT '状态(0:已关闭 1:待发车 2:运输中 3:已完成)',
    memo VARCHAR(500) COMMENT '备注',
    create_user VARCHAR(50) COMMENT '创建用户',
    create_date DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    oper_user VARCHAR(50) COMMENT '操作用户',
    update_date DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_from_city (from_city),
    INDEX idx_to_city (to_city),
    INDEX idx_departure_date (departure_date)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='物流板车表';
5. 询价表 (inquiry)
-- 询价记录表
CREATE TABLE inquiry (
    tid BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '序号',
    inquiry_no VARCHAR(50) NOT NULL COMMENT '询价编号',
    car_id BIGINT NOT NULL COMMENT '车源ID',
    user_id BIGINT NOT NULL COMMENT '询价用户ID',
    expected_price DECIMAL(12,2) COMMENT '期望价格(万)',
    message TEXT COMMENT '询价留言',
    reply_content TEXT COMMENT '回复内容',
    reply_price DECIMAL(12,2) COMMENT '回复价格(万)',
    reply_time DATETIME COMMENT '回复时间',
    status TINYINT DEFAULT 0 COMMENT '状态(0:待回复 1:已回复 2:已成交 3:已关闭)',
    memo VARCHAR(500) COMMENT '备注',
    create_user VARCHAR(50) COMMENT '创建用户',
    create_date DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    oper_user VARCHAR(50) COMMENT '操作用户',
    update_date DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_car_id (car_id),
    INDEX idx_user_id (user_id),
    INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='询价记录表';
6. 收藏/浏览记录表 (user_record)
-- 用户记录表（收藏、浏览记录）
CREATE TABLE user_record (
    tid BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '序号',
    user_id BIGINT NOT NULL COMMENT '用户ID',
    car_id BIGINT COMMENT '车源ID',
    shop_id BIGINT COMMENT '微店ID',
    record_type TINYINT NOT NULL COMMENT '记录类型(1:车源浏览 2:车源收藏 3:微店关注)',
    status TINYINT DEFAULT 1 COMMENT '状态(0:已删除 1:正常)',
    memo VARCHAR(500) COMMENT '备注',
    create_user VARCHAR(50) COMMENT '创建用户',
    create_date DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    oper_user VARCHAR(50) COMMENT '操作用户',
    update_date DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_user_id (user_id),
    INDEX idx_car_id (car_id),
    INDEX idx_record_type (record_type)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='用户记录表';
7. 品牌字典表 (car_brand)
-- 品牌字典表
CREATE TABLE car_brand (
    tid BIGINT AUTO_INCREMENT PRIMARY KEY COMMENT '序号',
    brand_name VARCHAR(100) NOT NULL COMMENT '品牌名称',
    brand_logo VARCHAR(255) COMMENT '品牌Logo',
    brand_initial CHAR(1) COMMENT '品牌首字母',
    sort_order INT DEFAULT 0 COMMENT '排序',
    status TINYINT DEFAULT 1 COMMENT '状态(0:停用 1:启用)',
    memo VARCHAR(500) COMMENT '备注',
    create_user VARCHAR(50) COMMENT '创建用户',
    create_date DATETIME DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
    oper_user VARCHAR(50) COMMENT '操作用户',
    update_date DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
    INDEX idx_brand_initial (brand_initial)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='品牌字典表';
接口设计
1. 车源模块 (/api/car)
接口路径	方法	说明
/api/car/list	GET	分页查询车源列表（支持品牌/价格/城市筛选）
/api/car/detail/{tid}	GET	获取车源详情
/api/car/publish	POST	发布车源
/api/car/update	PUT	更新车源信息
/api/car/delete/{tid}	DELETE	删除车源
/api/car/flash-sale	GET	获取限时秒杀车源
/api/car/new-energy	GET	获取新能源车源列表
/api/car/today-new	GET	获取今日上新车源
2. 微店模块 (/api/shop)
接口路径	方法	说明
/api/shop/my	GET	获取我的微店信息
/api/shop/detail/{tid}	GET	获取微店详情
/api/shop/create	POST	创建微店
/api/shop/update	PUT	更新微店信息
/api/shop/cars/{shopId}	GET	获取微店车源列表
3. 求购模块 (/api/purchase)
接口路径	方法	说明
/api/purchase/list	GET	分页查询求购大厅列表
/api/purchase/my	GET	获取我的求购需求
/api/purchase/detail/{tid}	GET	获取求购详情
/api/purchase/publish	POST	发布求购需求
/api/purchase/update	PUT	更新求购需求
/api/purchase/close/{tid}	PUT	关闭求购需求
4. 物流模块 (/api/logistics)
接口路径	方法	说明
/api/logistics/list	GET	分页查询物流板车列表
/api/logistics/detail/{tid}	GET	获取物流详情
/api/logistics/publish	POST	发布物流信息
/api/logistics/update	PUT	更新物流信息
5. 询价模块 (/api/inquiry)
接口路径	方法	说明
/api/inquiry/list	GET	获取询价列表
/api/inquiry/my	GET	获取我的询价记录
/api/inquiry/submit	POST	提交询价
/api/inquiry/reply	POST	回复询价
6. 记录查询模块 (/api/record)
接口路径	方法	说明
/api/record/browse	GET	获取浏览记录
/api/record/favorite	GET	获取收藏列表
/api/record/add-favorite	POST	添加收藏
/api/record/remove-favorite/{tid}	DELETE	取消收藏
7. 品牌字典模块 (/api/brand)
接口路径	方法	说明
/api/brand/list	GET	获取品牌列表
/api/brand/search	GET	按首字母搜索品牌
文件输出规划
将按以下目录结构生成 SQL 脚本：

doc/sql/
├── car/
│   ├── car_source.sql      -- 车源表
│   └── car_brand.sql       -- 品牌字典表
├── shop/
│   └── shop.sql            -- 微店表
├── purchase/
│   └── purchase_demand.sql -- 求购表
├── logistics/
│   └── logistics_truck.sql -- 物流板车表
├── inquiry/
│   └── inquiry.sql         -- 询价表
└── record/
    └── user_record.sql     -- 用户记录表
验证计划
自动验证
检查 SQL 脚本语法正确性
验证所有表必备字段（tid, status, memo, create_user, create_date, oper_user, update_date）
人工验证
确认业务需求完整覆盖
审核表结构设计合理性