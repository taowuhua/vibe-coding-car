<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.car.base.mapper.car.CarBrandMapper">

    <!-- 通用结果映射 -->
    <resultMap id="BaseResultMap" type="com.car.base.entity.car.CarBrand">
        <id column="tid" property="tid"/>
        <result column="brand_name" property="brandName"/>
        <result column="brand_logo" property="brandLogo"/>
        <result column="brand_initial" property="brandInitial"/>
        <result column="sort_order" property="sortOrder"/>
        <result column="status" property="status"/>
        <result column="memo" property="memo"/>
        <result column="create_user" property="createUser"/>
        <result column="create_date" property="createDate"/>
        <result column="oper_user" property="operUser"/>
        <result column="update_date" property="updateDate"/>
    </resultMap>

    <!-- 基础列 -->
    <sql id="Base_Column_List">
        tid, brand_name, brand_logo, brand_initial, sort_order, status, memo,
        create_user, create_date, oper_user, update_date
    </sql>

    <!-- 根据首字母查询品牌 -->
    <select id="findByInitial" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List"/>
        FROM car_brand
        WHERE brand_initial = #{initial} AND status = 1
        ORDER BY sort_order ASC
    </select>

    <!-- 查询所有启用的品牌 -->
    <select id="findAllActive" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List"/>
        FROM car_brand
        WHERE status = 1
        ORDER BY sort_order ASC
    </select>

    <!-- 根据品牌名称模糊查询 -->
    <select id="searchByName" resultMap="BaseResultMap">
        SELECT <include refid="Base_Column_List"/>
        FROM car_brand
        WHERE brand_name LIKE CONCAT('%', #{keyword}, '%') AND status = 1
        ORDER BY sort_order ASC
    </select>

</mapper>
